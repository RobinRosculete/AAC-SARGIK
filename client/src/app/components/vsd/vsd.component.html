<ion-modal #modal (ionModalWillDismiss)="stopCamera()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancel()">Cancel</ion-button>
        </ion-buttons>
        <ion-buttons slot="end">
          <ion-button (click)="confirmCropping()" *ngIf="myImage"
            >Confirm</ion-button
          >
        </ion-buttons>
        <ion-title>Visual Scene Display</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <div class="camera-preview"></div>

      <div *ngIf="!myImage">
        <!-- Capture and other buttons -->
        <ion-button expand="full" (click)="captureImage()">Capture</ion-button>
        <ion-button expand="full" (click)="fileInput.click()"
          >Upload Image</ion-button
        >
        <input
          type="file"
          #fileInput
          style="display: none"
          (change)="onFileSelected($event)"
        />
      </div>

      <!-- Added Grid to display buttons properly-->
      <ion-grid *ngIf="myImage && !croppingMode">
        <ion-row class="ion-justify-content-center">
          <ion-col class="ion-align-self-center">
            <ion-img [src]="croppedImage ? croppedImage : myImage"></ion-img>
          </ion-col>
        </ion-row>
        <ion-row class="ion-justify-content-center">
          <ion-col class="ion-align-self-center">
            <ion-button (click)="editPhoto()" id="gallery" expand="block">
              <ion-icon name="create-outline"> </ion-icon>
              Crop Image
            </ion-button>
          </ion-col>
          <ion-col class="ion-align-self-center">
            <ion-button id="generate-caption" expand="block">
              Predict Text
            </ion-button>
          </ion-col>
          <ion-col class="ion-align-self-center">
            <ion-button (click)="retakePhoto()" id="capture" expand="block">
              <ion-icon name="refresh-outline"></ion-icon>
              retake photo
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>

      <image-cropper
        #cropper
        *ngIf="myImage && croppingMode"
        [imageBase64]="myImage"
        format="png"
        (imageCropped)="imageCropped($event)"
      ></image-cropper>
    </ion-content>
  </ng-template>
</ion-modal>
