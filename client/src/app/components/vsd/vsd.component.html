<ion-modal
  #modal
  (willDismiss)="onWillDismiss($event)"
  (ionModalDidPresent)="startCamera()"
>
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancel()">Cancel</ion-button>
        </ion-buttons>
        <ion-title>Visual Scene Display</ion-title>
      </ion-toolbar>
    </ion-header>
    <div class="camera-container" *ngIf="!photoCaptured">
      <div id="cameraPreview" class="cameraPreview"></div>
      <div class="camera-controls">
        <ion-button
          class="button_color"
          (click)="captureImage()"
          expand="block"
          id="capture"
        >
          <ion-icon name="camera-outline" slot="icon-only"></ion-icon>
        </ion-button>

        <ion-button
          class="button_color"
          (click)="selectImageFromGallery()"
          expand="block"
          id="gallery"
        >
          <ion-icon name="images-outline"></ion-icon>
        </ion-button>

        <ion-button
          class="button_color"
          (click)="flipCamera()"
          expand="block"
          id="flip"
        >
          <ion-icon name="camera-reverse-outline"></ion-icon>
        </ion-button>
      </div>
    </div>
    <div *ngIf="photoCaptured">
      <ion-button
        class="button_color"
        (click)="retakePhoto()"
        expand="block"
        id="capture"
      >
        <ion-icon name="refresh-outline"></ion-icon>
      </ion-button>
    </div>

    <ion-img [src]="image" *ngIf="image && !cameraActive"></ion-img>
  </ng-template>
</ion-modal>
